<!DOCTYPE html>
<html lang="en">

  <!-- Head -->
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">    <!-- Metadata, OpenGraph and Schema.org -->
    

    <!-- Standard metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>A data-based approach to CrossFit training | Data Science Portfolio</title>
    <meta name="author" content="Nina  Cilliers">
    <meta name="description" content="Messy survey data is tranformed into usable training advice for CrossFit athletes.">
    <meta name="keywords" content="nina cilliers, nina gasbarro, data science">

    <!-- OpenGraph -->
    <meta property="og:site_name" content="Data Science Portfolio">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Data Science Portfolio | A data-based approach to CrossFit training">
    <meta property="og:url" content="https://ninacilliers.github.io/projects/crossfit_explore/">
    <meta property="og:description" content="Messy survey data is tranformed into usable training advice for CrossFit athletes.">
    
    <meta property="og:locale" content="en">

    <!-- Twitter card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="A data-based approach to CrossFit training">
    <meta name="twitter:description" content="Messy survey data is tranformed into usable training advice for CrossFit athletes.">
    
    


    <!-- Bootstrap & MDB -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous">

    <!-- Bootstrap Table -->
    <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css">

    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

    <!-- Code Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light">

    

    <!-- Styles -->
    
    <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;">
    
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="https://ninacilliers.github.io/projects/crossfit_explore/">

    <!-- Dark Mode -->
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark">

    <script src="/assets/js/theme.js"></script>
    <script src="/assets/js/dark_mode.js"></script>
    

  </head>

  <!-- Body -->
  <body class="fixed-top-nav ">

    <!-- Header -->
    <header>

      <!-- Nav Bar -->
      <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
        <div class="container">
          <a class="navbar-brand title font-weight-lighter" href="/">Data Science Portfolio</a>
          <!-- Navbar Toggle -->
          <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar top-bar"></span>
            <span class="icon-bar middle-bar"></span>
            <span class="icon-bar bottom-bar"></span>
          </button>

          <div class="collapse navbar-collapse text-right" id="navbarNav">
            <ul class="navbar-nav ml-auto flex-nowrap">

              <!-- About -->
              <li class="nav-item ">
                <a class="nav-link" href="/">About</a>
              </li>
              

              <!-- Other pages -->
              <li class="nav-item ">
                <a class="nav-link" href="/projects/">Projects</a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="/publications/">Publications</a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="/repositories/">Repositories</a>
              </li>

              <!-- Toogle theme mode -->
              <li class="toggle-container">
                <button id="light-toggle" title="Change theme">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
                </button>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <!-- Scrolling Progress Bar -->
      <progress id="progress" value="0">
        <div class="progress-container">
          <span class="progress-bar"></span>
        </div>
      </progress>
    </header>


    <!-- Content -->
    <div class="container mt-5">
      
        <!-- page.html -->
        <style>
          img {
            max-width: 100%
          }
        </style>
        <div class="post">

          <article>
            <h1>A data-based approach to CrossFit training </h1>
<h4><i>Transforming messy survey data into tractable advice for athletes.</i></h4>
<h4><br></h4>

<h2>Project Overview</h2>
<p>CrossFit is a high-intensity fitness program that combines elements of weightlifting, cardio, and gymnastics. It aims to improve overall physical fitness by incorporating constantly varied functional movements performed at a high intensity. At the pinnacle of CrossFit is the CrossFit Games, an annual competition that showcases the world’s fittest athletes. The CrossFit Games serve as a platform for elite athletes to test their skills and compete in a wide range of demanding workouts, challenging their strength, speed, power, and mental resilience. In this analysis, we will delve into the performance of CrossFit athletes, examining key factors that contribute to their success in this highly demanding and competitive sport.</p>

<p>In this comprehensive review of survey data from the CrossFit games, we first clean highly disorganized survey data profiling athletes competing in the CrossFit games. This data encompasses age, height, weight, training habits (including rest days and sessions per day), geographic location, eating habits (such as measuring food, adhering to paleo or quality eating practices), and performance data. Features are engineered for a more insightful analysis of athlete performance, enabling us to uncover valuable trends and patterns. We then look at how these factors correlate with athlete performance to gain valuable insight for athletes, coaches and future survey construction.</p>

<p>The dataset used in this project was provided by Ulrik Pedersen and can be found on <a href="https://www.kaggle.com/datasets/ulrikthygepedersen/crossfit-athletes" rel="external nofollow noopener" target="_blank">Kaggle</a>.</p>

<h2><br></h2>
<h2>Project outline</h2>

<ul>
  <li>Data overview</li>
  <li>Data cleaning
    <ul>
      <li>Event selection</li>
      <li>Outlier selection</li>
      <li>Cleaning survey Data</li>
    </ul>
  </li>
  <li>Feature engineering
    <ul>
      <li>Normalizing lifts</li>
      <li>Calculating body mass index (BMI)</li>
    </ul>
  </li>
  <li>Event performance</li>
  <li>Athlete demographics and performance
    <ul>
      <li>Gender</li>
      <li>BMI</li>
      <li>Age</li>
      <li>Region</li>
    </ul>
  </li>
  <li>Lifestyle factors</li>
  <li>Has CrossFit been life changing?</li>
  <li>Feature correlation</li>
  <li>Conclusions and recommendations</li>
</ul>

<h2><br></h2>
<h2>Data overview</h2>

<details>
  <summary> Click to see hidden code.</summary>
  <pre> 
  import pandas as pd
  import missingno as msno
  import seaborn as sns
  import matplotlib as mpl
  import matplotlib.pyplot as plt
  import numpy as np
  import os
  import pickle
  </pre>

  <pre>
  os.chdir('C:\\Users\\corne\\OneDrive\\Documents\\DS_Portfolio\\crossfit_project\\crossfit_project')
  </pre>
</details>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_csv</span><span class="p">(</span><span class="sh">'</span><span class="s">CrossFit_Games_data.csv</span><span class="sh">'</span><span class="p">)</span>
<span class="n">df</span><span class="p">.</span><span class="nf">info</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 423006 entries, 0 to 423005
Data columns (total 27 columns):
 #   Column      Non-Null Count   Dtype  
---  ------      --------------   -----  
 0   athlete_id  423003 non-null  float64
 1   name        331110 non-null  object 
 2   region      251262 non-null  object 
 3   team        155160 non-null  object 
 4   affiliate   241916 non-null  object 
 5   gender      331110 non-null  object 
 6   age         331110 non-null  float64
 7   height      159869 non-null  float64
 8   weight      229890 non-null  float64
 9   fran        55426 non-null   float64
 10  helen       30279 non-null   float64
 11  grace       40745 non-null   float64
 12  filthy50    19359 non-null   float64
 13  fgonebad    29738 non-null   float64
 14  run400      22246 non-null   float64
 15  run5k       36097 non-null   float64
 16  candj       104435 non-null  float64
 17  snatch      97280 non-null   float64
 18  deadlift    115323 non-null  float64
 19  backsq      110517 non-null  float64
 20  pullups     50608 non-null   float64
 21  eat         93932 non-null   object 
 22  train       105831 non-null  object 
 23  background  98945 non-null   object 
 24  experience  104936 non-null  object 
 25  schedule    97875 non-null   object 
 26  howlong     109206 non-null  object 
dtypes: float64(16), object(11)
memory usage: 87.1+ MB
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">.</span><span class="nf">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>athlete_id</th>
      <th>name</th>
      <th>region</th>
      <th>team</th>
      <th>affiliate</th>
      <th>gender</th>
      <th>age</th>
      <th>height</th>
      <th>weight</th>
      <th>fran</th>
      <th>...</th>
      <th>snatch</th>
      <th>deadlift</th>
      <th>backsq</th>
      <th>pullups</th>
      <th>eat</th>
      <th>train</th>
      <th>background</th>
      <th>experience</th>
      <th>schedule</th>
      <th>howlong</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2554.0</td>
      <td>Pj Ablang</td>
      <td>South West</td>
      <td>Double Edge</td>
      <td>Double Edge CrossFit</td>
      <td>Male</td>
      <td>24.0</td>
      <td>70.0</td>
      <td>166.0</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>400.0</td>
      <td>305.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>I workout mostly at a CrossFit Affiliate|I hav...</td>
      <td>I played youth or high school level sports|I r...</td>
      <td>I began CrossFit with a coach (e.g. at an affi...</td>
      <td>I do multiple workouts in a day 2x a week|</td>
      <td>4+ years|</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3517.0</td>
      <td>Derek Abdella</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Male</td>
      <td>42.0</td>
      <td>70.0</td>
      <td>190.0</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>I have a coach who determines my programming|I...</td>
      <td>I played youth or high school level sports|</td>
      <td>I began CrossFit with a coach (e.g. at an affi...</td>
      <td>I do multiple workouts in a day 2x a week|</td>
      <td>4+ years|</td>
    </tr>
    <tr>
      <th>2</th>
      <td>4691.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>5164.0</td>
      <td>Abo Brandon</td>
      <td>Southern California</td>
      <td>LAX CrossFit</td>
      <td>LAX CrossFit</td>
      <td>Male</td>
      <td>40.0</td>
      <td>67.0</td>
      <td>NaN</td>
      <td>211.0</td>
      <td>...</td>
      <td>200.0</td>
      <td>375.0</td>
      <td>325.0</td>
      <td>25.0</td>
      <td>I eat 1-3 full cheat meals per week|</td>
      <td>I workout mostly at a CrossFit Affiliate|I hav...</td>
      <td>I played youth or high school level sports|</td>
      <td>I began CrossFit by trying it alone (without a...</td>
      <td>I usually only do 1 workout a day|</td>
      <td>4+ years|</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5286.0</td>
      <td>Bryce Abbey</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Male</td>
      <td>32.0</td>
      <td>65.0</td>
      <td>149.0</td>
      <td>206.0</td>
      <td>...</td>
      <td>150.0</td>
      <td>NaN</td>
      <td>325.0</td>
      <td>50.0</td>
      <td>I eat quality foods but don't measure the amount|</td>
      <td>I workout mostly at a CrossFit Affiliate|I inc...</td>
      <td>I played college sports|</td>
      <td>I began CrossFit by trying it alone (without a...</td>
      <td>I usually only do 1 workout a day|I strictly s...</td>
      <td>1-2 years|</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 27 columns</p>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">msno</span><span class="p">.</span><span class="nf">matrix</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">11</span><span class="p">);</span>
</code></pre></div></div>

<p><img src="\assets\img\crossfit_explore\output_5_0.png" alt="missing data"></p>

<h2><br></h2>
<h2>Data cleaning</h2>

<h3 id="event-selection">Event selection</h3>
<p>Data that is not relevant to our analysis was removed from consideration along with the less frequently performed fitness events. It was necessary to remove these less common events to maintain a large dataset.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">region</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">age</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">weight</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">height</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">howlong</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">gender</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">eat</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">train</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">background</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">experience</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">schedule</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">howlong</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">deadlift</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">candj</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">snatch</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">backsq</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">experience</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">background</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">schedule</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">howlong</span><span class="sh">'</span><span class="p">])</span> <span class="c1">#removing NaNs from parameters of interest 
</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">affiliate</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">team</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">name</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">athlete_id</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">fran</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">helen</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">grace</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">filthy50</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">fgonebad</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">run400</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">run5k</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">pullups</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">train</span><span class="sh">'</span><span class="p">])</span> <span class="c1">#removing paramters not of interest + less popular events
</span></code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">msno</span><span class="p">.</span><span class="nf">matrix</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">11</span><span class="p">);</span>
</code></pre></div></div>

<p><img src="\assets\img\crossfit_explore\output_8_0.png" alt="missing data"></p>

<h3><br></h3>
<h3>Outlier Removal</h3>

<p>Only clear outliers were removed from the dataset. These outliers are suspected to be the result of data entry errors and were diagnosed from highly inprobable heights and weights and performances in events exceeding current world records. Only adults and male and female competitors were considered in this analysis.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#removing problematic entries 
</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">weight</span><span class="sh">'</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">1500</span><span class="p">]</span> <span class="c1">#removes two anomolous weight entries of 1,750 and 2,113
</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">gender</span><span class="sh">'</span><span class="p">]</span><span class="o">!=</span><span class="sh">'</span><span class="s">--</span><span class="sh">'</span><span class="p">]</span> <span class="c1">#removes 9 non-male/female gender entries due to small sample size
</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">age</span><span class="sh">'</span><span class="p">]</span><span class="o">&gt;=</span><span class="mi">18</span><span class="p">]</span> <span class="c1">#only considering adults 
</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">height</span><span class="sh">'</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">96</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">height</span><span class="sh">'</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">48</span><span class="p">)]</span><span class="c1">#selects people between 4 and 8 feet
</span>
<span class="c1">#no lifts above world recording holding lifts were included
</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">deadlift</span><span class="sh">'</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">deadlift</span><span class="sh">'</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">1105</span><span class="p">)</span><span class="o">|</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">gender</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="sh">'</span><span class="s">Female</span><span class="sh">'</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">deadlift</span><span class="sh">'</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">636</span><span class="p">))]</span> <span class="c1">#removes negative deadlift weights and deadlifts above the current world record
</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">candj</span><span class="sh">'</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">candj</span><span class="sh">'</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">395</span><span class="p">)]</span><span class="c1">#|((df['gender']=='Female')&amp;(df['candj']&lt;=265))] #removes negative clean and jerk value and reported weights above the current world record
</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">snatch</span><span class="sh">'</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">snatch</span><span class="sh">'</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">496</span><span class="p">)]</span><span class="c1">#|((df['gender']=='Female')&amp;(df['snatch']&lt;=341))] #removes weights above the current world record 
</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">backsq</span><span class="sh">'</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">backsq</span><span class="sh">'</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">1069</span><span class="p">)]</span><span class="c1">#|((df['gender']=='Female')&amp;(df['backsq']&lt;=615))] #removes weights over current world record
</span></code></pre></div></div>

<h3><br></h3>
<h3>Cleaning survey data</h3>

<p>Survey responses were cleaned and encoded. Problematically, multiple survey questions were collated into single responses on eating, background, training, and CrossFit experience. This means, for example, that if someone had worked as a CrossFit trainer, completed a CrossFit course, started doing CrossFit alone and declined to answer if they found CrossFit life changing, that all responses would be combined into one answer on experience. Similarly, it is possible for a single response to contain contradictory information. For instance, a respondent could indicate that they have no previous athletic background and were also a college athlete.</p>

<p>Thus, cleaning this data set, separating answers into individual question responses and removing non-sensical responses is non-trivial. Non-sensical survey responses were removed from consideration, and responses were organized to the best extent possible.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#get rid of declines to answer as only response 
</span><span class="n">decline_dict</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">Decline to answer|</span><span class="sh">'</span><span class="p">:</span><span class="n">np</span><span class="p">.</span><span class="n">nan</span><span class="p">}</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="n">decline_dict</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">background</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">experience</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">schedule</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">howlong</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">eat</span><span class="sh">'</span><span class="p">])</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#encoding background data 
</span>
<span class="c1">#encoding background questions 
</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">rec</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">background</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I regularly play recreational sports</span><span class="sh">'</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">high_school</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">background</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I played youth or high school level sports</span><span class="sh">'</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">college</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">background</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I played college sports</span><span class="sh">'</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">pro</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">background</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I played professional sports</span><span class="sh">'</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">no_background</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">background</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I have no athletic background besides CrossFit</span><span class="sh">'</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1">#delete nonsense answers
</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="o">~</span><span class="p">(((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">high_school</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">college</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">pro</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">rec</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">))</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">no_background</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">))]</span> <span class="c1">#you can't have no background and also a background 
</span></code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#encoding experience questions
</span>
<span class="c1">#create encoded columns for experience reponse
</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_coach</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">experience</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I began CrossFit with a coach</span><span class="sh">'</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_alone</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">experience</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I began CrossFit by trying it alone</span><span class="sh">'</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_courses</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">experience</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I have attended one or more specialty courses</span><span class="sh">'</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">life_changing</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">experience</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I have had a life changing experience due to CrossFit</span><span class="sh">'</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_trainer</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">experience</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I train other people</span><span class="sh">'</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_level1</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">experience</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I have completed the CrossFit Level 1 certificate course</span><span class="sh">'</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

<span class="c1">#delete nonsense answers
</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="o">~</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_coach</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_alone</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">))]</span> <span class="c1">#you can't start alone and with a coach
</span>
<span class="c1">#creating no response option for coaching start
</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_start_nr</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_coach</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_alone</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

<span class="c1">#other options are assumed to be 0 if not explicitly selected
</span></code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#creating encoded columns with schedule data
</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">rest_plus</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">schedule</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I typically rest 4 or more days per month</span><span class="sh">'</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">rest_minus</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">schedule</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I typically rest fewer than 4 days per month</span><span class="sh">'</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">rest_sched</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">schedule</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I strictly schedule my rest days</span><span class="sh">'</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_0extra</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">schedule</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I usually only do 1 workout a day</span><span class="sh">'</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_1extra</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">schedule</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I do multiple workouts in a day 1x a week</span><span class="sh">'</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_2extra</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">schedule</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I do multiple workouts in a day 2x a week</span><span class="sh">'</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_3extra</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">schedule</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I do multiple workouts in a day 3\+ times a week</span><span class="sh">'</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

<span class="c1">#removing/correcting problematic responses 
</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="o">~</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">rest_plus</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">rest_minus</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">))]</span> <span class="c1">#you can't have both more than and less than 4 rest days/month 
</span>
<span class="c1">#points are only assigned for the highest extra workout value (3x only vs. 3x and 2x and 1x if multi selected)
</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_0extra</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_3extra</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_0extra</span><span class="sh">'</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_1extra</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_3extra</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_1extra</span><span class="sh">'</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_2extra</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_3extra</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_2extra</span><span class="sh">'</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_0extra</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_2extra</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_0extra</span><span class="sh">'</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_1extra</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_2extra</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_1extra</span><span class="sh">'</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_0extra</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_1extra</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_0extra</span><span class="sh">'</span><span class="p">])</span>

<span class="c1">#adding no response columns
</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_nr</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_0extra</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_1extra</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_2extra</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">sched_3extra</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">rest_nr</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">rest_plus</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">rest_minus</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="c1">#schedling rest days is assumed to be 0 if not explicitly selected
</span></code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># encoding howlong (crossfit lifetime)
</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_1to2yrs</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">howlong</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">1-2 years</span><span class="sh">'</span><span class="p">)),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_2to4yrs</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">howlong</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">2-4 years</span><span class="sh">'</span><span class="p">)),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_4plus</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">howlong</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">4\+ years</span><span class="sh">'</span><span class="p">)),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_6to12mo</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">howlong</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">6-12 months</span><span class="sh">'</span><span class="p">)),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_lt6mo</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">howlong</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">Less than 6 months</span><span class="sh">'</span><span class="p">)),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

<span class="c1">#keeping only higest repsonse 
</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_lt6mo</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_4plus</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_lt6mo</span><span class="sh">'</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_6to12mo</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_4plus</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_6to12mo</span><span class="sh">'</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_1to2yrs</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_4plus</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_1to2yrs</span><span class="sh">'</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_2to4yrs</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_4plus</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_2to4yrs</span><span class="sh">'</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_lt6mo</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_2to4yrs</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_lt6mo</span><span class="sh">'</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_6to12mo</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_2to4yrs</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_6to12mo</span><span class="sh">'</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_1to2yrs</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_2to4yrs</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_1to2yrs</span><span class="sh">'</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_lt6mo</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_1to2yrs</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_lt6mo</span><span class="sh">'</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_6to12mo</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_1to2yrs</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_6to12mo</span><span class="sh">'</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_lt6mo</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_6to12mo</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">exp_lt6mo</span><span class="sh">'</span><span class="p">])</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#encoding dietary preferences 
</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">eat_conv</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">eat</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I eat whatever is convenient</span><span class="sh">'</span><span class="p">)),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">eat_cheat</span><span class="sh">'</span><span class="p">]</span><span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">eat</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I eat 1-3 full cheat meals per week</span><span class="sh">'</span><span class="p">)),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">eat_quality</span><span class="sh">'</span><span class="p">]</span><span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">eat</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I eat quality foods but don</span><span class="se">\'</span><span class="s">t measure the amount</span><span class="sh">'</span><span class="p">)),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">eat_paleo</span><span class="sh">'</span><span class="p">]</span><span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">eat</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I eat strict Paleo</span><span class="sh">'</span><span class="p">)),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">eat_cheat</span><span class="sh">'</span><span class="p">]</span><span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">eat</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I eat 1-3 full cheat meals per week</span><span class="sh">'</span><span class="p">)),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">eat_weigh</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">eat</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">I weigh and measure my food</span><span class="sh">'</span><span class="p">)),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#encoding location as US vs non-US
</span><span class="n">US_regions</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">Southern California</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">North East</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">North Central</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">South East</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">South Central</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">South West</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Mid Atlantic</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">Northern California</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">Central East</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">North West</span><span class="sh">'</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">US</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">region</span><span class="sh">'</span><span class="p">].</span><span class="nf">isin</span><span class="p">(</span><span class="n">US_regions</span><span class="p">)),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#encoding gender
</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">gender_</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">gender</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="sh">'</span><span class="s">Male</span><span class="sh">'</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div></div>
<h2><br></h2>
<h2>Feature Engineering</h2>

<h3 id="normalizing-lifts">Normalizing lifts</h3>

<p>It is customary in powerlifting to normalize the weight lifted to the bodyweight of the athlete. This corrects for the physical advantage of leverage and isolates the athletic contribution to a lift.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">norm_dl</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">deadlift</span><span class="sh">'</span><span class="p">]</span><span class="o">/</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">weight</span><span class="sh">'</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">norm_j</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">candj</span><span class="sh">'</span><span class="p">]</span><span class="o">/</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">weight</span><span class="sh">'</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">norm_s</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">snatch</span><span class="sh">'</span><span class="p">]</span><span class="o">/</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">weight</span><span class="sh">'</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">norm_bs</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">backsq</span><span class="sh">'</span><span class="p">]</span><span class="o">/</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">weight</span><span class="sh">'</span><span class="p">]</span>

<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">total_lift</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">norm_dl</span><span class="sh">'</span><span class="p">]</span><span class="o">+</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">norm_j</span><span class="sh">'</span><span class="p">]</span><span class="o">+</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">norm_s</span><span class="sh">'</span><span class="p">]</span><span class="o">+</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">norm_bs</span><span class="sh">'</span><span class="p">]</span>
</code></pre></div></div>
<h3><br></h3>
<h3>Calculating body mass index (BMI)</h3>
<p>BMI is a measure of body composition based on weight and height. It categorizes individuals as underweight, normal weight, overweight, or obese, and can be used as a starting point to set fitness goals. However, BMI does not distinguish between muscle and fat and can mistake highly muscular individuals as overweight.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">BMI</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">weight</span><span class="sh">'</span><span class="p">]</span><span class="o">*</span><span class="mf">0.453592</span><span class="o">/</span><span class="n">np</span><span class="p">.</span><span class="nf">square</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">height</span><span class="sh">'</span><span class="p">]</span><span class="o">*</span><span class="mf">0.0254</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">BMI</span><span class="sh">'</span><span class="p">]</span><span class="o">&gt;=</span><span class="mi">17</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">BMI</span><span class="sh">'</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">50</span><span class="p">)]</span><span class="c1">#considers only underweight - morbidly obese competitors
</span></code></pre></div></div>
<h2><br></h2>
<h2>Event performance</h2>

<p>Before exploring responses, we examine the normalized performance for the male and female athletes surveyed. The distributions are approximately normal in all cases, but the snatch and clean and jerk events have a wider distribution. This is likely the result of the importance of technique in these events, which leads to wider variation in addition to natural differences in strength.</p>

<details>

  <summary> Click to display hidden code.</summary>
  <pre>
  plt.style.use('ggplot')
  from matplotlib.pylab import rcParams
  rcParams['figure.figsize'] = 10,6
  </pre>

  <pre>
  xlabel = 'Lift in body weight'
  plt.subplot(221)
  sns.histplot(data = df, x = 'norm_dl', hue='gender',kde = True);
  plt.title('Deadlift')
  plt.xlabel(xlabel)
  plt.subplot(222)
  sns.histplot(data = df, x = 'norm_j', hue='gender',kde = True);
  plt.title('Clean and jerk')
  plt.xlabel(xlabel)
  plt.tight_layout()
  plt.subplot(223)
  sns.histplot(data = df, x = 'norm_s', hue='gender',kde = True);
  plt.title('Snatch')
  plt.xlabel(xlabel)
  plt.subplot(224)
  sns.histplot(data = df, x = 'norm_bs', hue='gender',kde = True);
  plt.title('Back squat')
  plt.xlabel(xlabel)
  plt.tight_layout()
  </pre>
</details>

<p><img src="\assets\img\crossfit_explore\output_26_0.png" alt="lift data"></p>

<details>
  <summary>Click to show hidden code.</summary>
  <pre>
  #total lift 
  sns.histplot(data = df, x = 'total_lift', hue='gender',kde = True);
  plt.title('Normalized total lift')
  plt.xlabel(xlabel);
  </pre>
</details>

<p><img src="\assets\img\crossfit_explore\output_27_0.png" alt="total lift data"></p>

<h2><br></h2>
<h2>Athlete demographics and performance</h2>

<p>Athlete demographics were collected as part of provided survey:</p>
<ul>
  <li>Gender</li>
  <li>BMI (from height and weight)</li>
  <li>Age</li>
  <li>Region</li>
</ul>

<p>We explore the data and look for correlations with performance.</p>

<h3><br></h3>
<h3>Gender</h3>

<p>Male competitors outnumber female competitors by 2.6 to 1. This is unsurprising as CrossFit is a strength-based sport, which typically attracts men.</p>

<details>
  <summary>Click to show hidden code.</summary>
  <pre> 
  sns.histplot(data = df, x = 'gender', hue = 'gender', hue_order = ['Female','Male'])
  #df.groupby('gender').agg('count') #20996/7999
  </pre>
</details>

<p><img src="\assets\img\crossfit_explore\output_29_1.png" alt="gender lift histogram"></p>

<p>We see expected gender differences in performance between the male and female groups. Male athletes outlifted female athletes on a body weight normalized basis by 24.5%.</p>

<details>
  <summary>Click to show hidden code.</summary>
  <pre> 
  sns.boxplot(x=df.gender, y=df.total_lift)
  plt.ylabel('Total lift (bodyweight)')

  df[['total_lift','gender']].groupby('gender').agg('mean') #(6.05-4.86)/4.86
  </pre>
</details>

<p><img src="\assets\img\crossfit_explore\output_31_1.png" alt="mean age lifts"></p>

<h3><br></h3>
<h3>BMI</h3>

<p>The distributions of heights and weights of CrossFit competitors are not smooth despite the large sample size. However, converting these non-independent metrics to BMI results in normal distributions with a positive skew that is particularly pronounced in the male population.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Mean BMI
</span><span class="k">def</span> <span class="nf">standard_error</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">stdev</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">std</span><span class="p">()</span>
    <span class="n">counts</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">count</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">stdev</span><span class="o">/</span><span class="n">np</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>

<span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">bmi_rounded</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span>  <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">BMI</span><span class="sh">'</span><span class="p">].</span><span class="nf">round</span><span class="p">()</span>
<span class="n">df_bmi</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="sh">'</span><span class="s">bmi_rounded</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">total_lift</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">gender</span><span class="sh">'</span><span class="p">]].</span><span class="nf">groupby</span><span class="p">([</span><span class="sh">'</span><span class="s">bmi_rounded</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">gender</span><span class="sh">'</span><span class="p">]).</span><span class="nf">agg</span><span class="p">([</span><span class="sh">'</span><span class="s">mean</span><span class="sh">'</span><span class="p">,</span><span class="n">standard_error</span><span class="p">,</span><span class="sh">'</span><span class="s">size</span><span class="sh">'</span><span class="p">]).</span><span class="nf">sort_values</span><span class="p">(</span><span class="sh">'</span><span class="s">bmi_rounded</span><span class="sh">'</span><span class="p">).</span><span class="nf">reset_index</span><span class="p">()</span>
<span class="n">df_bmi_f</span> <span class="o">=</span> <span class="n">df_bmi</span><span class="p">[(</span><span class="n">df_bmi</span><span class="p">[</span><span class="sh">'</span><span class="s">gender</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="sh">'</span><span class="s">Female</span><span class="sh">'</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df_bmi</span><span class="p">[</span><span class="sh">'</span><span class="s">total_lift</span><span class="sh">'</span><span class="p">][</span><span class="sh">'</span><span class="s">size</span><span class="sh">'</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">5</span><span class="p">)]</span>
<span class="n">df_bmi_m</span> <span class="o">=</span> <span class="n">df_bmi</span><span class="p">[(</span><span class="n">df_bmi</span><span class="p">[</span><span class="sh">'</span><span class="s">gender</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="sh">'</span><span class="s">Male</span><span class="sh">'</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df_bmi</span><span class="p">[</span><span class="sh">'</span><span class="s">total_lift</span><span class="sh">'</span><span class="p">][</span><span class="sh">'</span><span class="s">size</span><span class="sh">'</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">5</span><span class="p">)]</span>
</code></pre></div></div>
<details>
  <summary>Click to show hidden code.</summary>
  <pre> 
  plt.subplot(1,2,1)
  sns.histplot(data=df, x='height', hue='gender', binwidth=1,kde=True, hue_order=['Female','Male'])
  plt.subplot(1,2,2)
  sns.histplot(data=df, x='weight', hue='gender', binwidth=5, kde=True, hue_order = ['Female','Male'])
  plt.show()
  </pre>
</details>

<p><img src="\assets\img\crossfit_explore\output_34_0.png" alt="gender"></p>

<details>
  <summary>Click to show hidden code.</summary>
  <pre> 
  sns.histplot(data = df, x='BMI',hue='gender',binwidth=1,kde=True, hue_order=['Female','Male'])
  plt.show()
  </pre>
</details>

<p><img src="\assets\img\crossfit_explore\output_35_0.png" alt="BMI"></p>

<p>The figures below show BMI and total lift unaggregated in the left plot and aggregated to the nearest BMI with standard error in the right plot. Male athletes tend towards higher BMIs and lift more weight as expected. Interestingly, there appears to be a strong dependency between BMI and total lift with performance peaks observed at BMIs of 23 kg/m2 and 27 kg/m2 for female and male athletes respectively. Likely, this represents athletes gaining more muscle and eventually more fat, as more muscle would help performance and more fat would adversely affect performance. Thus, this analysis suggests that male and female athletes should adjust their training and diet to reach BMIs of 27 and 23 respectively with lean body compositions.</p>

<details>
  <summary>Click to show hidden code.</summary>
  <pre> 
  plt.subplot(1,2,1)
  plt.scatter(df.BMI[df.gender=='Male'], df.total_lift[df.gender=='Male'],alpha=0.01,color='crimson',label='Male')
  plt.scatter(df.BMI[df.gender=='Female'], df.total_lift[df.gender=='Female'],alpha=0.01,color='teal',label='Female')
  plt.xlabel('BMI (kg/m2)')
  plt.ylabel('Total lift \n(body weight)')
  leg = plt.legend()
  for lh in leg.legendHandles: 
      lh.set_alpha(1)
      
  plt.subplot(1,2,2)
  plt.plot(df_bmi_m['bmi_rounded'],df_bmi_m['total_lift']['mean'],'.-',color='crimson',label='Male')
  plt.errorbar(df_bmi_m['bmi_rounded'],df_bmi_m['total_lift']['mean'],yerr=df_bmi_m['total_lift']['standard_error'],color='crimson',label='_male_')
  plt.plot(df_bmi_f['bmi_rounded'],df_bmi_f['total_lift']['mean'],'.-',color='teal',label='Female')
  plt.errorbar(df_bmi_f['bmi_rounded'],df_bmi_f['total_lift']['mean'],yerr=df_bmi_f['total_lift']['standard_error'],color='teal',label='_female_')
  plt.xlabel('BMI (kg/m2)')
  plt.ylabel('Mean total lift \n(bodyweight)')
  plt.legend()

  plt.tight_layout()
  </pre>
</details>

<p><img src="\assets\img\crossfit_explore\output_37_1.png" alt="agg BMI data"></p>

<h3><br></h3>
<h3>Age</h3>

<p>The age distributions for male and female athletes is approximately normal with a slight positive skew that is more pronounced for female athletes. The mean ages for both male and female populations was 32.</p>

<details>
  <summary>Click to show hidden code.</summary>
  <pre> 
  sns.histplot(data = df, x = 'age', hue='gender',binwidth=1,kde = True)
  plt.show()
  #df[['gender','age']].groupby('gender').agg('mean')
  </pre>
</details>

<p><img src="\assets\img\crossfit_explore\output_39_0.png" alt="age data"></p>

<p>The normalized total lift for all athletes is shown against age in the figure on the left below. Male competitors lift slightly more, and a general decrease in performance past 25 is apparent. This data is grouped to the nearest BMI and shown with standard error on the plot on the right. Male performance shows a clear peak around 20 years of age, and female performance maintains a plateau until around 30 years of age. Both populations show distinct decreases in performance with increased age.</p>

<p>Interestingly, male performance appears to be more sensitive to age than female performance. Testosterone is extremely important to building and maintaining muscle and strength, and it is possible that declines in testosterone characteristic to male aging underly this observation. Slower recovery with age in both genders is likely also a significant factor of age-related decline.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df_age</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="sh">'</span><span class="s">age</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">gender</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">total_lift</span><span class="sh">'</span><span class="p">]].</span><span class="nf">groupby</span><span class="p">([</span><span class="sh">'</span><span class="s">age</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">gender</span><span class="sh">'</span><span class="p">]).</span><span class="nf">agg</span><span class="p">([</span><span class="sh">'</span><span class="s">mean</span><span class="sh">'</span><span class="p">,</span><span class="n">standard_error</span><span class="p">,</span><span class="sh">'</span><span class="s">size</span><span class="sh">'</span><span class="p">]).</span><span class="nf">sort_values</span><span class="p">(</span><span class="sh">'</span><span class="s">age</span><span class="sh">'</span><span class="p">).</span><span class="nf">reset_index</span><span class="p">()</span>
<span class="n">df_age_f</span> <span class="o">=</span> <span class="n">df_age</span><span class="p">[(</span><span class="n">df_age</span><span class="p">[</span><span class="sh">'</span><span class="s">gender</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="sh">'</span><span class="s">Female</span><span class="sh">'</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df_age</span><span class="p">[</span><span class="sh">'</span><span class="s">total_lift</span><span class="sh">'</span><span class="p">][</span><span class="sh">'</span><span class="s">size</span><span class="sh">'</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">5</span><span class="p">)]</span>
<span class="n">df_age_m</span> <span class="o">=</span> <span class="n">df_age</span><span class="p">[(</span><span class="n">df_age</span><span class="p">[</span><span class="sh">'</span><span class="s">gender</span><span class="sh">'</span><span class="p">]</span><span class="o">==</span><span class="sh">'</span><span class="s">Male</span><span class="sh">'</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df_age</span><span class="p">[</span><span class="sh">'</span><span class="s">total_lift</span><span class="sh">'</span><span class="p">][</span><span class="sh">'</span><span class="s">size</span><span class="sh">'</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">5</span><span class="p">)]</span>
</code></pre></div></div>

<details>
  <summary>Click to show hidden code.</summary>
  <pre>
  plt.subplot(1,2,1)
  plt.scatter(df.age[df.gender=='Male'], df.total_lift[df.gender=='Male'],alpha=0.01,color='crimson',label='Male')
  plt.scatter(df.age[df.gender=='Female'], df.total_lift[df.gender=='Female'],alpha=0.01,color='teal',label='Female')
  plt.xlabel('Years')
  plt.ylabel('Total lift \n(bodyweight)')
  leg = plt.legend()
  for lh in leg.legendHandles: 
      lh.set_alpha(1)

  plt.subplot(1,2,2)
  sns.lineplot(x=df_age_m['age'],y=df_age_m['total_lift']['mean'],color='crimson',label='Male')
  plt.errorbar(df_age_m.age,df_age_m['total_lift']['mean'],yerr=df_age_m['total_lift']['standard_error'],color='crimson',label='_Male_')
  sns.lineplot(x=df_age_f['age'],y=df_age_f['total_lift']['mean'],color='teal', label='Female')
  plt.errorbar(df_age_f.age,df_age_f['total_lift']['mean'],yerr=df_age_f['total_lift']['standard_error'],color='teal',label='_Female_')
  plt.legend()
  plt.xlabel('Years')
  plt.ylabel('Mean total lift \n(bodyweight)')

  plt.tight_layout()
  </pre>
</details>

<p><img src="\assets\img\crossfit_explore\output_41_1.png" alt="age data"></p>

<h3><br></h3>
<h3>Region</h3>

<p>Most competitors are based in the US, and CrossFit appears to be particularly popular in California. Outside the US, the most popular locations for CrossFit are Canada and Europe.</p>

<details>
  <summary>Click to show hidden code.</summary>
  <pre>
  plt.subplot(1,2,1)
  plt.title('Region')
  sns.histplot(data = df, x = 'region')
  plt.xlabel('')
  plt.xticks(rotation = 90) 

  plt.subplot(1,2,2)
  plt.title('Country')
  plt.bar('US',df['US'].sum())
  plt.bar('non-US',(df.shape[0]-df['US'].sum()))

  plt.tight_layout()
  plt.show()
  </pre>
</details>

<p><img src="\assets\img\crossfit_explore\output_43_0.png" alt="region"></p>

<p>CrossFit athletes in the US appear to slightly outperform CrossFit athletes outside of the US. This could be due to increased local competition driving athletes to higher levels of performance or access to sophisticated training facilities and experienced coaches.</p>

<details>
  <summary>Click to show hidden code.</summary>
  <pre>
  plt.subplot(1,2,1)
  sns.boxplot(x=df.region,y=df.total_lift)
  plt.xticks(rotation = 90)
  plt.xlabel('')
  plt.ylabel('Total lift (bodyweight)')
  ax = plt.subplot(1,2,2)
  sns.boxplot(x=df.US, y=df.total_lift, hue = df.gender)
  plt.tight_layout()
  plt.ylabel('Total lift (bodyweight)')
  ax.set_xticklabels(('Outside US','US'))
  plt.xlabel('')
  plt.show()
  </pre>
</details>

<p><img src="\assets\img\crossfit_explore\output_45_0.png" alt="region"></p>

<h2><br></h2>
<h2>Lifestyle factors</h2>

<p>Training and lifestyle choices are important factors for athlete performance. The following factors were surveyed:</p>

<ul>
  <li>CrossFit age (time doing CrossFit)</li>
  <li>Two-a-day training session frequency</li>
  <li>Frequency of rest days</li>
  <li>Athletic history</li>
  <li>Eating habits</li>
</ul>

<p>We examine these responses and identify key factors for improved performance. Histograms of these survey responses are shown below.</p>

<details>
  <summary>Click to show hidden code.</summary>
  <pre>
  plt.figure(figsize=(14,9))
  plt.title('Lifestyle Survey Responses')
  plt.subplot(2,3,1)
  plt.bar('&lt;0.5',df['exp_lt6mo'].sum())
  plt.bar('0.5-1',df['exp_6to12mo'].sum())
  plt.bar('1-2',df['exp_1to2yrs'].sum())
  plt.bar('2-4',df['exp_2to4yrs'].sum())
  plt.bar('4+',df['exp_4plus'].sum())
  plt.title('Crossfit age');
  plt.ylabel('Count')
  plt.xlabel('Years')

  plt.subplot(2,3,2)
  plt.bar('0', df['sched_0extra'].sum())
  plt.bar('1', df['sched_1extra'].sum())
  plt.bar('2', df['sched_2extra'].sum())
  plt.bar('3+', df['sched_3extra'].sum())
  plt.title('Two-a-day frequency')
  plt.ylabel('Count')
  plt.xlabel('Frequency per week')
  plt.xticks(rotation = 90);

  plt.subplot(2,3,3)
  #plt.bar('Scheduled', df['rest_sched'].sum())
  plt.bar('4+', df['rest_plus'].sum())
  plt.bar('&lt;4 ', df['rest_minus'].sum())
  plt.title('Rest days')
  plt.xlabel('Days per month')
  plt.ylabel('Count')

  plt.subplot(2,3,4)
  plt.title('Started with coach')
  plt.bar('No', df['exp_alone'].sum()-df['exp_start_nr'].sum())
  plt.bar('Yes', df['exp_coach'].sum())
  plt.ylabel('Count')
  #plt.bar('Crossfit trainer', df['trainer'].sum())
  #plt.bar('Completed specialty course', df['specialty_course'].sum())
  #plt.bar('Completed level 1', df['level_one'].sum())
  #plt.xticks(rotation=90);

  plt.subplot(2,3,5)
  plt.bar('High \nschool', df['high_school'].sum())
  plt.bar('College', df['college'].sum())
  plt.bar('Pro', df['pro'].sum())
  plt.bar('None', df['no_background'].sum())
  plt.bar('Rec. \nsports', df['rec'].sum())
  plt.ylabel('Count')
  #plt.xlabel('Background')
  plt.title('Athletic history')
  #plt.xticks(rotation=90)

  plt.subplot(2,3,6)
  plt.bar('Eats \nquality', df['eat_quality'].sum())
  plt.bar('Cheat \nmeals', df['eat_cheat'].sum())
  plt.bar('Measures \nfood', df['eat_weigh'].sum())
  plt.bar('Paleo', df['eat_paleo'].sum())
  plt.bar('Eats \nconvenience', df['eat_conv'].sum())
  plt.ylabel('Count')
  plt.title('Eating habits')
  #plt.xticks(rotation=90)

  plt.tight_layout()
  </pre>
</details>

<p><img src="\assets\img\crossfit_explore\output_41_1.png" alt="lifestyle data"></p>

<h4>Key take-aways: </h4>

<ul>
  <li>
    <p>Most CrossFit athletes wait to participate in the CrossFit games until they have some experience with the sport under their belt.</p>
  </li>
  <li>
    <p>It is unusual for athletes to do CrossFit for more than four years, possibly due to the intensity of the training sessions in terms of time commitment and potential for injury.</p>
  </li>
  <li>
    <p>Most athletes adhere to the recommended 1 day per week rest day schedule.</p>
  </li>
  <li>
    <p>Most athletes have some athletic background prior to starting CrossFit.</p>
  </li>
</ul>

<p>Next, we look at how these factors correlate to performance.</p>

<details>
  <summary>Click to show hidden code.</summary>
  <pre>
  #melting data for boxplots
  df_exp =  pd.melt(df, id_vars=['total_lift'], var_name='experience', value_vars=['exp_lt6mo','exp_6to12mo','exp_1to2yrs','exp_2to4yrs','exp_4plus','total_lift'])
  df_exp = df_exp[df_exp!=0].dropna()
  df_freq = pd.melt(df, id_vars=['total_lift'], var_name='freq', value_vars=['sched_0extra','sched_1extra','sched_2extra','sched_3extra'])
  df_freq = df_freq[df_freq!=0].dropna()
  df_rest = pd.melt(df, id_vars=['total_lift'], var_name='rest', value_vars=['rest_plus', 'rest_minus'])
  df_rest = df_rest[df_rest!=0].dropna()
  df_hist = pd.melt(df, id_vars=['total_lift'], var_name='hist', value_vars=['high_school','college','pro','no_background','rec'])
  df_hist = df_hist[df_hist!=0].dropna()
  df_start = pd.melt(df, id_vars=['total_lift'], var_name='start', value_vars=['exp_alone','exp_coach'])
  df_start = df_start[df_start!=0].dropna()
  df_eat = pd.melt(df, id_vars=['total_lift'], var_name='eat', value_vars=['eat_quality','eat_cheat','eat_weigh','eat_paleo','eat_conv'])
  df_eat = df_eat[df_eat!=0].dropna()

  y_label = 'Body weights lifted (total)'

  #box plots of above figures 
  fig, axs = plt.subplots(nrows=2, ncols=3, sharey=True, figsize=(14,9))

  for ax in axs.flatten()[1:]:
      ax.yaxis.label.set_visible(False)
      #ax.yaxis.set_ticks([])
      
  ax1 = plt.subplot(2,3,1)
  sns.boxplot(data = df_exp, x='experience',y='total_lift')
  ax1.set_xticklabels(('&lt;0.5','0.5-1','1-2','2-4','4+'))
  ax1.set_xlabel('Years')
  ax1.set_ylabel(y_label)
  ax1.set_title('Crossfit age')
  ax2 = plt.subplot(2,3,2)    
  sns.boxplot(data=df_freq, x='freq',y='total_lift')
  ax2.set_xticklabels(('0','1','2','3+'))
  ax2.set_xlabel('Frequency per week')
  ax2.set_title('Two-a-day frequency')
  ax3 = plt.subplot(2,3,3)    
  sns.boxplot(data=df_rest, x='rest',y='total_lift')
  ax3.set_xticklabels(('&lt;4','4+'))
  ax3.set_title('Rest days')
  ax3.set_xlabel('Days per month')
  ax4 = plt.subplot(2,3,4) 
  sns.boxplot(data=df_start,x='start',y='total_lift')
  ax4.set_xticklabels(('No','Yes'))
  ax4.set_xlabel('')
  ax4.set_title('Started with coach')
  ax4.yaxis.label.set_visible(True)
  ax4.set_ylabel(y_label)
  ax5 = plt.subplot(2,3,5)    
  sns.boxplot(data=df_hist, x='hist',y='total_lift')
  ax5.set_xticklabels(('High \nschool','College','Pro','None','Rec. \nsports'))
  ax5.set_xlabel('')
  ax5.set_title('Athletic history')
  ax6 = plt.subplot(2,3,6)    
  sns.boxplot(data=df_eat, x='eat',y='total_lift')
  ax6.set_xticklabels(('Eats \nquality','Cheat \nmeals','Measures \nfood','Paleo','Eats \nconvenience'))
  ax6.set_xlabel('')
  ax6.set_title('Eating habits')
  plt.tight_layout()
  </pre>
</details>

<p><img src="\assets\img\crossfit_explore\output_49_0.png" alt="lifestyle data"></p>

<p>CrossFit age (years doing CrossFit), frequency of two-a-day session, taking sufficient rest days, and athletic background all correlate with improved athletic performance as would be expected from conventional knowledge. Interestingly, starting CrossFit alone rather than at a facility with a coach appears to also correlate with improved performance. This is perhaps indirectly a result of self-starting athletes having a stronger athletic history. Reported eating habits, however, do not appear strongly correlated with performance.</p>

<h2><br></h2>
<h2>Has CrossFit been life changing?</h2>

<p>Previous analysis focused on athlete attributes and lifestyle. Survey respondents were additionally asked if CrossFit has been life changing, and this reponse can be used to isolate and guage the effect of attitude on performance.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">changed</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">life_changing</span><span class="sh">'</span><span class="p">].</span><span class="nf">sum</span><span class="p">()</span>
<span class="n">not_changed</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">changed</span> <span class="c1">#non-answers are considered non-life changing responses
</span></code></pre></div></div>

<details>
  <summary>Click to show hidden code.</summary>
  <pre>
  plt.subplot(1,2,1)
  plt.pie([not_changed, changed],labels=['Not life changing','Life changing'])

  plt.subplot(1,2,2)
  sns.boxplot(x = df.life_changing, y=df.total_lift)
  plt.ylabel('Total Lift (bodyweight)')
  plt.xlabel('Is crossfit lifechanging?')
  plt.tight_layout()
  </pre>
</details>

<p><img src="\assets\img\crossfit_explore\output_52_0.png" alt="life changing"></p>

<p>Interestingly, strong positive attitudes towards CrossFit do not appear to correlate with improved performance. This is counter intuitive as enjoying the ritual and community of CrossFit should increase the likelihood of continuing to train and participate in CrossFit.</p>

<h2><br></h2>
<h2>Feature correlation</h2>

<p>The Pearson correlation coefficient is a statistical measure that quantifies the strength and direction of the linear relationship between two continuous variables. It ranges from -1 to 1, where a value of 1 indicates a perfect positive correlation, -1 indicates a perfect negative correlation, and 0 indicates no linear correlation. Frequency of two-a-day training sessions, completing a level 1 certification, starting CrossFit alone, and working as a CrossFit trainer are all correlated to improved performance, while having no athletic background prior to CrossFit is correlated to worse performance.</p>

<p>The strong non-linear correlations between performance and BMI and age are not captured in the above matrix. It is important to note that the Pearson correlation coefficient only measures linear relationships and may not capture non-linear associations or other types of relationships between variables.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Heat map 
</span>
<span class="c1">#optimizng range for color scale
</span><span class="n">vmin</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">corr</span><span class="p">().</span><span class="nf">min</span><span class="p">().</span><span class="nf">min</span><span class="p">()</span>
<span class="n">vmax</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">corr</span><span class="p">()[</span><span class="n">df</span><span class="p">.</span><span class="nf">corr</span><span class="p">()</span><span class="o">!=</span><span class="mi">1</span><span class="p">].</span><span class="nf">max</span><span class="p">().</span><span class="nf">max</span><span class="p">()</span>

<span class="c1">#thresholding selected correlations
</span><span class="n">df_corr</span>  <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">backsq</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">deadlift</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">candj</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">snatch</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">exp_start_nr</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">sched_nr</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">rest_nr</span><span class="sh">'</span><span class="p">]).</span><span class="nf">corr</span><span class="p">()[</span><span class="n">np</span><span class="p">.</span><span class="nf">absolute</span><span class="p">(</span><span class="n">df</span><span class="p">.</span><span class="nf">corr</span><span class="p">())</span><span class="o">&gt;</span><span class="mf">0.2</span><span class="p">]</span>

<span class="c1">#Mask for selecting only bottom triangle
</span><span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">triu</span><span class="p">(</span><span class="n">df_corr</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="c1">#plt.style.context('default')
</span><span class="n">sns</span><span class="p">.</span><span class="nf">heatmap</span><span class="p">(</span><span class="n">df_corr</span><span class="p">,</span><span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span><span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="sh">'</span><span class="s">seismic</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">grid</span><span class="p">()</span>
<span class="c1">#print(mask)
</span></code></pre></div></div>

<p><img src="\assets\img\crossfit_explore\output_55_1.png" alt="correlation matrix"></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#pickeling cleaned data
</span><span class="n">df</span><span class="p">.</span><span class="nf">to_pickle</span><span class="p">(</span><span class="sh">'</span><span class="s">cleaned_cf_data.pkl</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div>
<h2><br></h2>
<h2>Conclusion and recommendations</h2>

<p>The results of this investigation indicate that key factors for CrossFit athlete performance are body composition, age, and gender. Other contributing factors include CrossFit age (years doing CrossFit), frequency of two-a-day sessions, taking sufficient rest days, and athletic background. Interestingly, passion for CrossFit and dietary choices did not correlate with athlete performance.</p>

<p>CrossFit athletes are encouraged to follow a paleo diet. A modern paleo diet includes fruits, vegetables, lean meats, eggs, nuts and seeds and is not calorie or macro based. However, adherence to a paleo diet is uncorrelated with athlete performance. To better understand how athlete diet influences performance, additional questions could be added to future surveys. For example, caloric intake and protein consumption may be better predictors of performance, as sufficient protein and fuel are required to build and maintain muscle. If these features can be correlated with improved performance, CrossFit as an organization may have sufficient grounds to restructure their dietary recommendations for athletes.</p>

<p>Finally, this data indicates that the key factors for athlete performance are largely predetermined by age and gender. However, there are key take aways for athletes seeking to improve their performance from their baseline:</p>

<div class="alert alert-block alert-success" style="font-size:18px; line-height: 1.7em;">

  <ul>
    <li>
      <p>Athletes should target lean body compositions and BMIs of 23 kg/m<sup>2</sup> and 27 mg/m<sup>2</sup> for females and males respectively.<br></p>
    </li>
    <li>
      <p>Training should be managed for long-term adherence to CrossFit. While taking an overly aggressive approach to training may seem advantageous, the data indicates that there is a high risk of burnout or injury after four years, while performance continues to improve with CrossFit experience. <br></p>
    </li>
    <li>
      <p>Adding two-a-day training sessions is beneficial to performance with no apparent risk of overtraining. <br></p>
    </li>
    <li>
      <p>Taking one rest day a week will improve performance without adverse effects.
</p>
    </li>
  </ul>

</div>

          </article>

        </div>
      
    </div>

    <!-- Footer -->    
    <footer class="fixed-bottom">
      <div class="container mt-0">
        © Copyright 2023 Nina  Cilliers. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>.

      </div>
    </footer>

    <!-- JavaScripts -->
    <!-- jQuery -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <!-- Bootsrap & MDB scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script>

    <!-- Masonry & imagesLoaded -->
  <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
  <script defer src="/assets/js/masonry.js" type="text/javascript"></script>
    
  <!-- Medium Zoom JS -->
  <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script>
  <script defer src="/assets/js/zoom.js"></script>

  <!-- Bootstrap Table -->
  <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script>

  <!-- Load Common JS -->
  <script src="/assets/js/no_defer.js"></script>
  <script defer src="/assets/js/common.js"></script>
  <script defer src="/assets/js/copy_code.js" type="text/javascript"></script>

    
  <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script>
  <script async src="https://badge.dimensions.ai/badge.js"></script>

    <!-- MathJax -->
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        tags: 'ams'
      }
    };
  </script>
  <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script>
  <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>

    
    

<!-- Scrolling Progress Bar -->
<script type="text/javascript">
  /*
   * This JavaScript code has been adapted from the article 
   * https://css-tricks.com/reading-position-indicator/ authored by Pankaj Parashar, 
   * published on the website https://css-tricks.com on the 7th of May, 2014.
   * Couple of changes were made to the original code to make it compatible 
   * with the `al-foio` theme.
   */
  const progressBar = $("#progress");
  /*
   * We set up the bar after all elements are done loading.
   * In some cases, if the images in the page are larger than the intended
   * size they'll have on the page, they'll be resized via CSS to accomodate
   * the desired size. This mistake, however, breaks the computations as the
   * scroll size is computed as soon as the elements finish loading.
   * To account for this, a minimal delay was introduced before computing the
   * values.
   */
  window.onload = function () {
    setTimeout(progressBarSetup, 50);
  };
  /*
   * We set up the bar according to the browser.
   * If the browser supports the progress element we use that.
   * Otherwise, we resize the bar thru CSS styling
   */
  function progressBarSetup() {
    if ("max" in document.createElement("progress")) {
      initializeProgressElement();
      $(document).on("scroll", function() {
        progressBar.attr({ value: getCurrentScrollPosition() });
      });
      $(window).on("resize", initializeProgressElement);
    } else {
      resizeProgressBar();
      $(document).on("scroll", resizeProgressBar);
      $(window).on("resize", resizeProgressBar);
    }
  }
  /*
   * The vertical scroll position is the same as the number of pixels that
   * are hidden from view above the scrollable area. Thus, a value > 0 is
   * how much the user has scrolled from the top
   */
  function getCurrentScrollPosition() {
    return $(window).scrollTop();
  }

  function initializeProgressElement() {
    let navbarHeight = $("#navbar").outerHeight(true);
    $("body").css({ "padding-top": navbarHeight });
    $("progress-container").css({ "padding-top": navbarHeight });
    progressBar.css({ top: navbarHeight });
    progressBar.attr({
      max: getDistanceToScroll(),
      value: getCurrentScrollPosition(),
    });
  }
  /*
   * The offset between the html document height and the browser viewport
   * height will be greater than zero if vertical scroll is possible.
   * This is the distance the user can scroll
   */
  function getDistanceToScroll() {
    return $(document).height() - $(window).height();
  }

  function resizeProgressBar() {
    progressBar.css({ width: getWidthPercentage() + "%" });
  }
  // The scroll ratio equals the percentage to resize the bar
  function getWidthPercentage() {
    return (getCurrentScrollPosition() / getDistanceToScroll()) * 100;
  }
</script>

  </body>
</html>
